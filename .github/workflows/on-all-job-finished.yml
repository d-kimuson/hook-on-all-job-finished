name: on-all-job-finished

on:
  # workflow_run:
  #   workflows:
  #     - "*"
  #   types:
  #     - completed
  check_run:
    types: "completed"

jobs:
  check_if_all_job_finished:
    runs-on: ubuntu-latest
    timeout-minutes: 5

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - uses: actions/github-script@v6
        id: all-workflow-summary
        with:
          script: |
            // ref: https://github.com/actions/github-script#run-a-separate-file
            return await require('./.github/workflows/script.cjs')({ github, context })
          result-encoding: string
          github-token: ${{ secrets.GITHUB_TOKEN }}
